<ng-container *transloco="let t; read: 'admin.userManagement.inviteUser'">
  <ng-container
    *rxLet="
      assignableUserRoles$;
      let assignableUserRoles;
      error: error;
      suspense: suspense;
      errorTrigger: hasGeneralError$
    "
  >
    <watt-card variant="watt-stoke">
      <watt-card-title>
        <ng-container
          *ngTemplateOutlet="
            userRolesHeadline;
            context: {
              $implicit: assignableUserRoles.length
            }
          "
        ></ng-container>
      </watt-card-title>
      <div class="userRoles">
        <ul class="watt-text-s">
          <li *ngFor="let userRole of assignableUserRoles">
            <ng-container>
              <watt-checkbox
                [ngModel]="false"
                (ngModelChange)="selectUserRole($event, userRole)"
              ></watt-checkbox>
              <div>{{ userRole.name }}</div>
              <div>{{ userRole.description }}</div>
            </ng-container>
          </li>
        </ul>
      </div>
    </watt-card>
  </ng-container>

  <ng-template #suspense>
    <watt-spinner></watt-spinner>
  </ng-template>

  <ng-template #error>
    <watt-empty-state
      icon="custom-power"
      [title]="t('errorTitle')"
      [message]="t('errorMessage')"
    ></watt-empty-state>
  </ng-template>

  <ng-template #userRolesHeadline let-userRolesCount>
    <ng-container *transloco="let t; read: 'admin.userManagement.tabs.roles.userRolesHeadline'">
      <h4 *ngIf="userRolesCount === 1">
        {{ t("singular", { userRolesCount }) }}
      </h4>

      <h4 *ngIf="userRolesCount !== 1">
        {{ t("plural", { userRolesCount }) }}
      </h4>
    </ng-container>
  </ng-template>
</ng-container>
