<ng-container *rxLet="loading as isLoading">
  <watt-card
    variant="solid"
    *transloco="let t; read: 'admin.userManagement.permissionDetail.tabs.userRoles'"
  >
    <div *ngIf="isLoading" class="spinner">
      <watt-spinner></watt-spinner>
    </div>

    <ng-container *ngIf="!isLoading">
      <watt-card-title *rxLet="userRoles?.length as userRoleCount">
        <h4 *ngIf="userRoleCount === 1 && !error">
          {{t("rolesSingular", {userRoleCount})}}
        </h4>
        <h4 *ngIf="userRoleCount !== 1 && !error">
          {{t("rolesPlural", {userRoleCount})}}
        </h4>
      </watt-card-title>

      <watt-table
        [columns]="columns"
        [dataSource]="dataSource"
        sortBy="name"
        sortDirection="desc"
        [sortClear]="false"
        [resolveHeader]="translateHeader"
        *ngIf="!error"
      >
        <ng-container *wattTableCell="columns['name']; let element">
          {{ element.name }}
        </ng-container>
      </watt-table>

      <watt-empty-state
        *ngIf="error"
        icon="custom-power"
        [title]="'shared.error.title' | transloco"
        [message]="'shared.error.message' | transloco"
      ></watt-empty-state>

      <ng-container *rxLet="userRoles?.length as userRoleCount">
        <h4 *ngIf="userRoleCount === 0" class="no-results-text">
          {{ t("noEntries") }}
        </h4>
      </ng-container>
    </ng-container>
  </watt-card>
</ng-container>
