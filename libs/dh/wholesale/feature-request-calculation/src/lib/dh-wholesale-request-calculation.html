<watt-card vater inset="0" *transloco="let t; read: 'wholesale.requestCalculation'">
  <form [formGroup]="form" (ngSubmit)="requestCalculation()">
    <vater-flex fill="vertical" gap="m">
      <vater-stack align="flex-start" direction="column" gap="s">
        <watt-dropdown
          translate="wholesale.requestCalculation.processTypes"
          [label]="t('processType')"
          [formControl]="form.controls.processType"
          [options]="progressTypeOptions"
          dhDropdownTranslator
        />

        <watt-datepicker
          [range]="true"
          [label]="t('period')"
          [max]="maxDate"
          [formControl]="form.controls.period"
        >
          <watt-field-error *ngIf="form.controls.period.errors?.maxOneMonthDateRange">
            {{ t('maxPeriodLength')}}
          </watt-field-error>
        </watt-datepicker>

        <watt-dropdown
          *ngIf="gridAreaOptions.length > 1"
          [label]="t('gridAreas')"
          [formControl]="form.controls.gridarea"
          [options]="gridAreaOptions"
        />

        <watt-dropdown
          translate="wholesale.requestCalculation.meteringPointTypes"
          [label]="t('meteringPointType')"
          [formControl]="form.controls.meteringPointType"
          [options]="meteringPointOptions"
          dhDropdownTranslator
        />

        <watt-dropdown
          *ngIf="showEnergySupplierDropdown()"
          [label]="t('energySupplier')"
          [formControl]="form.controls.energySupplierId"
          [options]="energySupplierOptions"
        />

        <watt-dropdown
          *ngIf="showBalanceResponsibleDropdown()"
          [label]="t('balanceResponsible')"
          [formControl]="form.controls.balanceResponsibleId"
          [options]="balanceResponsibleOptions"
        />
      </vater-stack>
      <vater-stack direction="column" align="flex-end">
        <watt-button [disabled]="!form.valid" variant="primary" type="submit"
          >{{t('request')}}</watt-button
        >
      </vater-stack>
    </vater-flex>
  </form>
</watt-card>
